{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport createDataContext from \"./createDataContext\";\nimport AuthentificationAPI from \"../API/AuthentificationAPI\";\nimport axios from 'axios';\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport { navigate } from \"../NavigationRef\";\nimport Dashboard from \"../scenes/Dashboard\";\nimport Temperature from \"../scenes/Temperature\";\nimport { brand } from 'expo-device';\n\nvar authReducer = function authReducer(state, action) {\n  switch (action.type) {\n    case 'add_error':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        errorMessage: action.payload\n      });\n\n    case 'signin':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        reponse: action.payload\n      });\n\n    case 'signup':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        reponse: action.payload\n      });\n\n    default:\n      return state;\n  }\n};\n\nvar signup = function signup(dispatch) {\n  return function _callee(phone) {\n    var _axios, url, reponse;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _axios = require('axios');\n            url = 'http://agrotech.yobeen.com/apimobile/alldevice?phone=';\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(_axios.get(url, {\n              params: {\n                phone: phone\n              }\n            }, {\n              headers: {\n                'Accept': '*',\n                'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundaryyEmKNDsBKjB7QEqu'\n              }\n            }));\n\n          case 5:\n            reponse = _context.sent;\n            dispatch({\n              type: 'signup',\n              payload: reponse.data\n            });\n            console.log('hgcgh');\n            console.log(reponse.data);\n\n            if (reponse.data['user infomation'].length == 0) {\n              console.log(reponse.data['user infomation'].length);\n            } else {\n              navigate('Dashboard');\n              console.log(reponse.data['user infomation'].first_name);\n            }\n\n            _context.next = 16;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n            dispatch({\n              type: 'add_error',\n              payload: 'Something went wrong'\n            });\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 12]], Promise);\n  };\n};\n\nvar signin = function signin(dispatch) {\n  return function _callee2(phone) {\n    var _axios2, url, reponse;\n\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _axios2 = require('axios');\n            url = 'http://agrotech.yobeen.com/apimobile/data?phone=';\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(_axios2.get(url, {\n              params: {\n                phone: phone,\n                brand: brand\n              }\n            }, {\n              headers: {\n                'Accept': '*',\n                'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundaryyEmKNDsBKjB7QEqu'\n              }\n            }));\n\n          case 5:\n            reponse = _context2.sent;\n            dispatch({\n              type: 'signin',\n              payload: reponse.data\n            });\n            console.log(reponse.data);\n\n            if (reponse.data['user infomation'].length == 0) {\n              console.log(reponse.data['user infomation'].length);\n            } else {\n              navigate('Dashboard');\n              console.log(reponse.data['user infomation'].first_name);\n            }\n\n            _context2.next = 15;\n            break;\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n            dispatch({\n              type: 'add_error',\n              payload: 'Something went wrong'\n            });\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  };\n};\n\nvar _createDataContext = createDataContext(authReducer, {\n  signin: signin,\n  signup: signup\n}, {\n  reponse: '',\n  errorMessage: ''\n}),\n    Provider = _createDataContext.Provider,\n    Context = _createDataContext.Context;\n\nexport { Provider, Context };","map":{"version":3,"sources":["/Users/viet/Desktop/dossier sans titre 2/stage/yobeen agrotech app/src/context/AuthContext.js"],"names":["createDataContext","AuthentificationAPI","axios","AsyncStorage","navigate","Dashboard","Temperature","brand","authReducer","state","action","type","errorMessage","payload","reponse","signup","dispatch","phone","require","url","get","params","headers","data","console","log","length","first_name","signin","Provider","Context"],"mappings":"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","sourcesContent":["import createDataContext from './createDataContext';\r\nimport AuthentificationAPI from '../API/AuthentificationAPI';\r\nimport axios from 'axios';\r\nimport {AsyncStorage} from 'react-native';\r\nimport {navigate} from '../NavigationRef';\r\nimport Dashboard from '../scenes/Dashboard';\r\nimport Temperature from '../scenes/Temperature';\r\nimport { brand } from 'expo-device';\r\n\r\n/*Function of reducer */\r\nconst authReducer=(state,action)=>{\r\n    switch(action.type){\r\n        case 'add_error':\r\n            return {...state,errorMessage:action.payload};\r\n        case 'signin':\r\n            return {...state,reponse:action.payload};\r\n        case 'signup':\r\n            return {...state,reponse:action.payload};\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst signup=(dispatch)=>{\r\n    return async (phone) =>{\r\n    try{\r\n    const axios = require('axios');\r\n    const url='http://agrotech.yobeen.com/apimobile/alldevice?phone='\r\n    const reponse= await  axios.get(url,{\r\n        params: {\r\n          phone:phone\r\n        }\r\n      },{\r\n        headers: {\r\n            'Accept': '*',\r\n            'Content-Type':'multipart/form-data; boundary=----WebKitFormBoundaryyEmKNDsBKjB7QEqu'      \r\n          },\r\n        })\r\n         \r\n    dispatch({type:'signup',payload:reponse.data});\r\n    console.log('hgcgh')\r\n    console.log(reponse.data)\r\n    \r\n    if (reponse.data['user infomation'].length==0)\r\n    {\r\n        \r\n    console.log(reponse.data['user infomation'].length)\r\n    }\r\n    else \r\n    {\r\n        navigate('Dashboard');\r\n        console.log(reponse.data['user infomation'].first_name)\r\n    }\r\n    \r\n    }\r\n    catch(err){\r\n    console.log(err);\r\n        dispatch({\r\n    type:'add_error',\r\n    payload:'Something went wrong'\r\n        });\r\n    }\r\n    }; \r\n    };\r\n\r\n\r\n\r\n\r\n\r\nconst signin=(dispatch)=>{\r\nreturn async (phone) =>{\r\ntry{\r\nconst axios = require('axios');\r\nconst url='http://agrotech.yobeen.com/apimobile/data?phone='\r\nconst reponse= await  axios.get(url,{\r\n    params: {\r\n      phone:phone,\r\n      brand: brand\r\n    }\r\n  },{\r\n    headers: {\r\n        'Accept': '*',\r\n        'Content-Type':'multipart/form-data; boundary=----WebKitFormBoundaryyEmKNDsBKjB7QEqu'      \r\n      },\r\n    })\r\n     \r\ndispatch({type:'signin',payload:reponse.data});\r\nconsole.log(reponse.data)\r\n\r\nif (reponse.data['user infomation'].length==0)\r\n{\r\nconsole.log(reponse.data['user infomation'].length)\r\n}\r\nelse \r\n{\r\n    navigate('Dashboard');\r\n    console.log(reponse.data['user infomation'].first_name)\r\n}\r\n\r\n}\r\ncatch(err){\r\nconsole.log(err);\r\n    dispatch({\r\ntype:'add_error',\r\npayload:'Something went wrong'\r\n    });\r\n}\r\n}; \r\n};\r\nexport const {Provider,Context} =createDataContext(\r\n    authReducer,\r\n     {signin,signup},\r\n     {reponse:'',errorMessage:''}\r\n);"]},"metadata":{},"sourceType":"module"}