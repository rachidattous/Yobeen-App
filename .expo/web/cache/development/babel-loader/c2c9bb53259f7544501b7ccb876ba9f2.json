{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Line = void 0;\n\nvar deepmerge_1 = __importDefault(require(\"deepmerge\"));\n\nvar React = __importStar(require(\"react\"));\n\nvar react_native_svg_1 = require(\"react-native-svg\");\n\nvar ChartContext_1 = __importDefault(require(\"./ChartContext\"));\n\nvar Line_utils_1 = require(\"./Line.utils\");\n\nvar utils_1 = require(\"./utils\");\n\nvar Line = React.forwardRef(function Line(props, ref) {\n  var _a = React.useContext(ChartContext_1.default),\n      contextData = _a.data,\n      dimensions = _a.dimensions,\n      viewportDomain = _a.viewportDomain,\n      viewportOrigin = _a.viewportOrigin,\n      lastTouch = _a.lastTouch;\n\n  var _b = React.useState(props.initialTooltipIndex),\n      tooltipIndex = _b[0],\n      _setTooltipIndex = _b[1];\n\n  var _c = deepmerge_1.default(defaultProps, props),\n      _d = _c.theme,\n      stroke = _d.stroke,\n      scatter = _d.scatter,\n      tooltipComponent = _c.tooltipComponent,\n      _e = _c.data,\n      data = _e === void 0 ? contextData : _e,\n      tension = _c.tension,\n      smoothing = _c.smoothing,\n      onTooltipSelect = _c.onTooltipSelect,\n      hideTooltipOnDragEnd = _c.hideTooltipOnDragEnd,\n      hideTooltipAfter = _c.hideTooltipAfter,\n      _f = _c.onTooltipSelectEnd,\n      onTooltipSelectEnd = _f === void 0 ? function () {} : _f;\n\n  if (!dimensions) {\n    return null;\n  }\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      setTooltipIndex: function setTooltipIndex(index) {\n        if (typeof index === 'number' && (index < 0 || index >= data.length)) {\n          throw new Error(\"Range out of bounds. Tried to set tooltip index to \" + index + \" but there are only \" + data.length + \" data points.\");\n        }\n\n        _setTooltipIndex(index);\n      }\n    };\n  });\n  React.useEffect(function () {\n    if (props.initialTooltipIndex !== undefined && !lastTouch) {\n      _setTooltipIndex(props.initialTooltipIndex);\n    }\n  }, [props.initialTooltipIndex]);\n  React.useEffect(function () {\n    var _a, _b;\n\n    var scaledPoints = utils_1.scalePointsToDimensions(data, viewportDomain, dimensions);\n    var newIndex = Line_utils_1.calculateTooltipIndex(scaledPoints, lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.position);\n    var tooltipTimer;\n\n    if ((lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.type) === 'panEnd') {\n      if (hideTooltipOnDragEnd && Math.abs((_a = lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.translation) === null || _a === void 0 ? void 0 : _a.x) > 5) {\n        _setTooltipIndex(undefined);\n      } else if (typeof hideTooltipAfter === 'number') {\n        tooltipTimer = setTimeout(function () {\n          return _setTooltipIndex(undefined);\n        }, hideTooltipAfter);\n      }\n\n      onTooltipSelectEnd();\n    } else if (newIndex !== tooltipIndex && lastTouch) {\n      if (typeof hideTooltipAfter === 'number') {\n        tooltipTimer = setTimeout(function () {\n          return _setTooltipIndex(undefined);\n        }, hideTooltipAfter);\n      }\n\n      if ((lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.type) !== 'pan' || Math.abs((_b = lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.translation) === null || _b === void 0 ? void 0 : _b.x) > 5) {\n        _setTooltipIndex(newIndex);\n      }\n\n      if (typeof onTooltipSelect === 'function' && typeof newIndex === 'number' && data.length > newIndex) {\n        onTooltipSelect(data[newIndex], newIndex);\n      }\n    } else if (newIndex === tooltipIndex && (lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.type) === 'tap') {\n      _setTooltipIndex(undefined);\n    }\n\n    return function () {\n      clearTimeout(tooltipTimer);\n    };\n  }, [lastTouch, hideTooltipAfter]);\n  var scaledPoints = utils_1.scalePointsToDimensions(data, viewportDomain, dimensions);\n  var points = Line_utils_1.adjustPointsForThickStroke(scaledPoints, stroke);\n  var path = utils_1.svgPath(points, smoothing, tension);\n  return React.createElement(React.Fragment, null, React.createElement(react_native_svg_1.G, {\n    translateX: viewportOrigin.x,\n    translateY: viewportOrigin.y\n  }, React.createElement(react_native_svg_1.Path, {\n    d: path,\n    fill: \"none\",\n    strokeLinecap: \"round\",\n    strokeDasharray: stroke.dashArray.length > 0 ? stroke.dashArray.join(',') : undefined,\n    stroke: stroke.color,\n    strokeWidth: stroke.width,\n    strokeOpacity: stroke.opacity,\n    mask: \"url(#Mask)\"\n  }), points.map(function (p, i) {\n    var shape = i === tooltipIndex ? deepmerge_1.default(scatter.default, scatter.selected) : scatter.default;\n\n    if (data[i].x < viewportDomain.x.min || data[i].x > viewportDomain.x.max || data[i].y < viewportDomain.y.min || data[i].y > viewportDomain.y.max) {\n      return null;\n    }\n\n    if (shape.width === 0 || shape.height === 0) {\n      return null;\n    }\n\n    return React.createElement(react_native_svg_1.Rect, {\n      key: JSON.stringify(p),\n      x: p.x - shape.width / 2 + shape.dx,\n      y: p.y - shape.height / 2 - shape.dy,\n      rx: shape.rx,\n      fill: shape.color,\n      opacity: shape.opacity,\n      height: shape.height,\n      width: shape.width\n    });\n  })), tooltipIndex !== undefined && tooltipComponent && React.cloneElement(tooltipComponent, {\n    value: data[tooltipIndex],\n    position: scaledPoints[tooltipIndex]\n  }));\n});\nexports.Line = Line;\nvar defaultProps = {\n  theme: {\n    stroke: {\n      color: 'black',\n      width: 1,\n      opacity: 1,\n      dashArray: []\n    },\n    scatter: {\n      default: {\n        width: 0,\n        height: 0,\n        dx: 0,\n        dy: 0,\n        rx: 0,\n        color: 'black'\n      },\n      selected: {}\n    }\n  },\n  tension: 0.3,\n  smoothing: 'none'\n};","map":{"version":3,"sources":["/Users/viet/Desktop/dossier sans titre 2/stage/yobeen agrotech app/node_modules/react-native-responsive-linechart/lib/Line.js"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","prototype","hasOwnProperty","call","__importDefault","exports","Line","deepmerge_1","require","React","react_native_svg_1","ChartContext_1","Line_utils_1","utils_1","forwardRef","props","ref","_a","useContext","default","contextData","data","dimensions","viewportDomain","viewportOrigin","lastTouch","_b","useState","initialTooltipIndex","tooltipIndex","setTooltipIndex","_c","defaultProps","_d","theme","stroke","scatter","tooltipComponent","_e","tension","smoothing","onTooltipSelect","hideTooltipOnDragEnd","hideTooltipAfter","_f","onTooltipSelectEnd","useImperativeHandle","index","length","Error","useEffect","scaledPoints","scalePointsToDimensions","newIndex","calculateTooltipIndex","position","tooltipTimer","type","Math","abs","translation","x","setTimeout","clearTimeout","points","adjustPointsForThickStroke","path","svgPath","createElement","Fragment","G","translateX","translateY","y","Path","d","fill","strokeLinecap","strokeDasharray","dashArray","join","color","strokeWidth","width","strokeOpacity","opacity","mask","map","p","i","shape","selected","min","max","height","Rect","key","JSON","stringify","dx","dy","rx","cloneElement"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Line = void 0;\nvar deepmerge_1 = __importDefault(require(\"deepmerge\"));\nvar React = __importStar(require(\"react\"));\nvar react_native_svg_1 = require(\"react-native-svg\");\nvar ChartContext_1 = __importDefault(require(\"./ChartContext\"));\nvar Line_utils_1 = require(\"./Line.utils\");\nvar utils_1 = require(\"./utils\");\nvar Line = React.forwardRef(function Line(props, ref) {\n    var _a = React.useContext(ChartContext_1.default), contextData = _a.data, dimensions = _a.dimensions, viewportDomain = _a.viewportDomain, viewportOrigin = _a.viewportOrigin, lastTouch = _a.lastTouch;\n    var _b = React.useState(props.initialTooltipIndex), tooltipIndex = _b[0], setTooltipIndex = _b[1];\n    var _c = deepmerge_1.default(defaultProps, props), _d = _c.theme, stroke = _d.stroke, scatter = _d.scatter, tooltipComponent = _c.tooltipComponent, _e = _c.data, data = _e === void 0 ? contextData : _e, tension = _c.tension, smoothing = _c.smoothing, onTooltipSelect = _c.onTooltipSelect, hideTooltipOnDragEnd = _c.hideTooltipOnDragEnd, hideTooltipAfter = _c.hideTooltipAfter, _f = _c.onTooltipSelectEnd, onTooltipSelectEnd = _f === void 0 ? function () { } : _f;\n    if (!dimensions) {\n        return null;\n    }\n    React.useImperativeHandle(ref, function () { return ({\n        setTooltipIndex: function (index) {\n            if (typeof index === 'number' && (index < 0 || index >= data.length)) {\n                throw new Error(\"Range out of bounds. Tried to set tooltip index to \" + index + \" but there are only \" + data.length + \" data points.\");\n            }\n            setTooltipIndex(index);\n        },\n    }); });\n    React.useEffect(function () {\n        if (props.initialTooltipIndex !== undefined && !lastTouch) {\n            setTooltipIndex(props.initialTooltipIndex);\n        }\n    }, [props.initialTooltipIndex]);\n    React.useEffect(function () {\n        var _a, _b;\n        var scaledPoints = utils_1.scalePointsToDimensions(data, viewportDomain, dimensions);\n        var newIndex = Line_utils_1.calculateTooltipIndex(scaledPoints, lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.position);\n        var tooltipTimer;\n        if ((lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.type) === 'panEnd') {\n            if (hideTooltipOnDragEnd && Math.abs((_a = lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.translation) === null || _a === void 0 ? void 0 : _a.x) > 5) {\n                setTooltipIndex(undefined);\n            }\n            // Hide tooltip after specified time\n            else if (typeof hideTooltipAfter === 'number') {\n                tooltipTimer = setTimeout(function () { return setTooltipIndex(undefined); }, hideTooltipAfter);\n            }\n            onTooltipSelectEnd();\n        }\n        else if (newIndex !== tooltipIndex && lastTouch) {\n            // Hide tooltip after specified time\n            if (typeof hideTooltipAfter === 'number') {\n                tooltipTimer = setTimeout(function () { return setTooltipIndex(undefined); }, hideTooltipAfter);\n            }\n            // Necessary for Android because pan is called even when finger is not actually panning.\n            // If we don't check for this, we have interference with the tap handler\n            if ((lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.type) !== 'pan' || Math.abs((_b = lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.translation) === null || _b === void 0 ? void 0 : _b.x) > 5) {\n                setTooltipIndex(newIndex);\n            }\n            if (typeof onTooltipSelect === 'function' && typeof newIndex === 'number' && data.length > newIndex) {\n                onTooltipSelect(data[newIndex], newIndex);\n            }\n        }\n        else if (newIndex === tooltipIndex && (lastTouch === null || lastTouch === void 0 ? void 0 : lastTouch.type) === 'tap') {\n            setTooltipIndex(undefined);\n        }\n        return function () {\n            clearTimeout(tooltipTimer);\n        };\n    }, [lastTouch, hideTooltipAfter]);\n    var scaledPoints = utils_1.scalePointsToDimensions(data, viewportDomain, dimensions);\n    var points = Line_utils_1.adjustPointsForThickStroke(scaledPoints, stroke);\n    var path = utils_1.svgPath(points, smoothing, tension);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(react_native_svg_1.G, { translateX: viewportOrigin.x, translateY: viewportOrigin.y },\n            React.createElement(react_native_svg_1.Path, { d: path, fill: \"none\", strokeLinecap: \"round\", strokeDasharray: stroke.dashArray.length > 0 ? stroke.dashArray.join(',') : undefined, stroke: stroke.color, strokeWidth: stroke.width, strokeOpacity: stroke.opacity, mask: \"url(#Mask)\" }),\n            points.map(function (p, i) {\n                var shape = i === tooltipIndex ? deepmerge_1.default(scatter.default, scatter.selected) : scatter.default;\n                // Don't render if point falls out of viewport\n                if (data[i].x < viewportDomain.x.min || data[i].x > viewportDomain.x.max || data[i].y < viewportDomain.y.min || data[i].y > viewportDomain.y.max) {\n                    return null;\n                }\n                // Don't render if shape has no dimensions\n                if (shape.width === 0 || shape.height === 0) {\n                    return null;\n                }\n                return (React.createElement(react_native_svg_1.Rect, { key: JSON.stringify(p), x: p.x - shape.width / 2 + shape.dx, y: p.y - shape.height / 2 - shape.dy, rx: shape.rx, fill: shape.color, opacity: shape.opacity, height: shape.height, width: shape.width }));\n            })),\n        tooltipIndex !== undefined &&\n            tooltipComponent &&\n            React.cloneElement(tooltipComponent, { value: data[tooltipIndex], position: scaledPoints[tooltipIndex] })));\n});\nexports.Line = Line;\nvar defaultProps = {\n    theme: {\n        stroke: {\n            color: 'black',\n            width: 1,\n            opacity: 1,\n            dashArray: [],\n        },\n        scatter: {\n            default: {\n                width: 0,\n                height: 0,\n                dx: 0,\n                dy: 0,\n                rx: 0,\n                color: 'black',\n            },\n            selected: {},\n        },\n    },\n    tension: 0.3,\n    smoothing: 'none',\n};\n"]},"metadata":{},"sourceType":"script"}